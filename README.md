# üêß NixOS Configuration ‚Äî MateBook X Pro

–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è NixOS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Flakes –¥–ª—è Huawei MateBook X Pro (i7 12th Gen).

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **NixOS Flakes** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- **LUKS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ø–æ–ª–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
- **BTRFS** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π –∏ —Å–Ω–∞–ø—à–æ—Ç–∞–º–∏
- **Impermanence** ‚Äî stateless —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ä–µ–Ω—å —á–∏—Å—Ç—ã–π –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
- **Hyprland** ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ç–∞–π–ª–æ–≤—ã–π Wayland compositor
- **Home Manager** ‚Äî –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nixos/
‚îú‚îÄ‚îÄ flake.nix                  # üéØ –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ flake.lock                 # üîí –ó–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ
‚îú‚îÄ‚îÄ hosts/                     # üì¶ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω
‚îÇ   ‚îî‚îÄ‚îÄ matebook/              # üíª Huawei MateBook X Pro
‚îÇ       ‚îú‚îÄ‚îÄ default.nix        # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å —Ö–æ—Å—Ç–∞
‚îÇ       ‚îî‚îÄ‚îÄ hardware.nix       # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π hardware config
‚îÇ
‚îú‚îÄ‚îÄ modules/                   # üß© –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ system/                # ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ boot.nix           # –ó–∞–≥—Ä—É–∑—á–∏–∫, LUKS, Plymouth
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filesystem.nix     # BTRFS subvolumes, swap
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ networking.nix     # WiFi, Bluetooth, DNS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ locale.nix         # –Ø–∑—ã–∫, timezone, —Ä–∞—Å–∫–ª–∞–¥–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nix.nix            # Flakes, caches, garbage collection
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ impermanence.nix   # –≠—Ñ–µ–º–µ—Ä–Ω—ã–π –∫–æ—Ä–µ–Ω—å, persist
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ desktop/               # üñ•Ô∏è Desktop –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hyprland.nix       # Wayland compositor + —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audio.nix          # PipeWire –∞—É–¥–∏–æ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fonts.nix          # –®—Ä–∏—Ñ—Ç—ã –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hardware/              # üîß –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –¥–ª—è –∂–µ–ª–µ–∑–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ intel.nix          # Intel GPU, power management
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ users/                 # üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ       ‚îî‚îÄ‚îÄ aleksandr.nix      # –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
‚îÇ
‚îú‚îÄ‚îÄ home/                      # üè† Home Manager –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ aleksandr/             # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ default.nix        # –ì–ª–∞–≤–Ω—ã–π HM —Ñ–∞–π–ª
‚îÇ       ‚îî‚îÄ‚îÄ programs/          # üì¶ –ü—Ä–æ–≥—Ä–∞–º–º—ã
‚îÇ           ‚îú‚îÄ‚îÄ shell.nix      # Zsh, Starship, fzf
‚îÇ           ‚îú‚îÄ‚îÄ terminal.nix   # Kitty —Ç–µ—Ä–º–∏–Ω–∞–ª
‚îÇ           ‚îú‚îÄ‚îÄ hyprland.nix   # Hyprland, Waybar, Wofi
‚îÇ           ‚îú‚îÄ‚îÄ git.nix        # Git, lazygit
‚îÇ           ‚îî‚îÄ‚îÄ utilities.nix  # CLI —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îî‚îÄ‚îÄ README.md                  # üìñ –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –ö–∞–∫ —á–∏—Ç–∞—Ç—å —ç—Ç—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É

1. **flake.nix** ‚Äî –Ω–∞—á–Ω–∏ –æ—Ç—Å—é–¥–∞, —ç—Ç–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
2. **hosts/matebook/** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–≤–æ–µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –Ω–æ—É—Ç–±—É–∫–∞  
3. **modules/** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã
4. **home/** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ Home Manager

---

## üíæ –†–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞

### –°—Ö–µ–º–∞ —Ä–∞–∑–¥–µ–ª–æ–≤ (1TB NVMe)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ /dev/nvme0n1                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ nvme0n1p1: ESP (512MB, FAT32)                     ‚Üí /boot        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ nvme0n1p2: LUKS encrypted (~999GB)                               ‚îÇ
‚îÇ ‚îî‚îÄ> /dev/mapper/cryptroot (BTRFS)                                ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ @           ‚Üí /           (–∫–æ—Ä–µ–Ω—å, —ç—Ñ–µ–º–µ—Ä–Ω—ã–π)            ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ @home       ‚Üí /home       (–¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥)             ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ @nix        ‚Üí /nix        (Nix store, –≤–∞–∂–Ω–æ!)            ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ @persist    ‚Üí /persist    (persistent –¥–∞–Ω–Ω—ã–µ)            ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ @log        ‚Üí /var/log    (–ª–æ–≥–∏)                         ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ @swap       ‚Üí /swap       (swapfile –¥–ª—è hibernate)       ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ @snapshots  ‚Üí /.snapshots (—Å–Ω–∞–ø—à–æ—Ç—ã)                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### BTRFS Subvolumes –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

| Subvolume | Mountpoint | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|------------|
| `@` | `/` | –ö–æ—Ä–Ω–µ–≤–∞—è –§–°, **–æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ** (impermanence) |
| `@home` | `/home` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ |
| `@nix` | `/nix` | Nix store ‚Äî –≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| `@persist` | `/persist` | Persistent state (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏, –≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏) |
| `@log` | `/var/log` | –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏) |
| `@swap` | `/swap` | Swapfile –¥–ª—è –≥–∏–±–µ—Ä–Ω–∞—Ü–∏–∏ (–±–µ–∑ CoW!) |
| `@snapshots` | `/.snapshots` | –°–Ω–∞–ø—à–æ—Ç—ã –¥–ª—è –æ—Ç–∫–∞—Ç–∞ |

### Swap —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

- **zram 16GB** ‚Äî –±—ã—Å—Ç—Ä—ã–π swap –≤ —Å–∂–∞—Ç–æ–π RAM –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- **swapfile 18GB** –≤ `@swap` ‚Äî –¥–ª—è –≥–∏–±–µ—Ä–Ω–∞—Ü–∏–∏ (suspend-to-disk)
- –í—Å—ë –≤–Ω—É—Ç—Ä–∏ LUKS = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ! üîê

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å USB

–ó–∞–≥—Ä—É–∑–∏—Å—å —Å NixOS ISO. –£–±–µ–¥–∏—Å—å —á—Ç–æ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –≤ UEFI —Ä–µ–∂–∏–º–µ:

```bash
ls /sys/firmware/efi  # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WiFi

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
nmtui

# –ò–ª–∏ —á–µ—Ä–µ–∑ iwctl
iwctl
[iwd]# station wlan0 connect "WiFi-Name"
```

### 3. –†–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞

> [!CAUTION]
> –°–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã **–£–î–ê–õ–Ø–¢ –í–°–ï –î–ê–ù–ù–´–ï** –Ω–∞ –¥–∏—Å–∫–µ! –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—ã–±—Ä–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏—Å–∫!


```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ root (–≤—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É—é—Ç root!)
sudo -i
```

```bash
# –û–ø—Ä–µ–¥–µ–ª–∏ –¥–∏—Å–∫ (–æ–±—ã—á–Ω–æ nvme0n1 –¥–ª—è NVMe SSD)
lsblk
fdisk -l
```

#### –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–¥–µ–ª–æ–≤

| ‚Ññ | –†–∞–∑–¥–µ–ª | –†–∞–∑–º–µ—Ä | –¢–∏–ø | –§–° | –ú–µ—Ç–∫–∞ | –¢–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
|---|--------|--------|-----|-----|-------|-------------------|
| 1 | `/dev/nvme0n1p1` | 1 GB | EFI System | FAT32 | `BOOT` | `/boot` |
| 2 | `/dev/nvme0n1p2` | ~999 GB | Linux filesystem | LUKS2 ‚Üí BTRFS | `nixos` | (subvolumes) |

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤

```bash
# –°–æ–∑–¥–∞—ë–º GPT —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤
parted /dev/nvme0n1 -- mklabel gpt

# –†–∞–∑–¥–µ–ª 1: EFI System Partition (ESP)
# - –†–∞–∑–º–µ—Ä: 1GB (—Å –∑–∞–ø–∞—Å–æ–º –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–¥–µ—Ä)
# - –¢–∏–ø: ESP (EFI System Partition)
# - –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: FAT32
parted /dev/nvme0n1 -- mkpart ESP fat32 1MiB 1025MiB
parted /dev/nvme0n1 -- set 1 esp on

# –†–∞–∑–¥–µ–ª 2: –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑–¥–µ–ª –¥–ª—è LUKS + BTRFS
# - –†–∞–∑–º–µ—Ä: –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ (~999GB)
# - –ë—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω LUKS2
parted /dev/nvme0n1 -- mkpart primary 1025MiB 100%

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
lsblk /dev/nvme0n1
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
NAME        SIZE  TYPE
nvme0n1     1TB   disk
‚îú‚îÄnvme0n1p1 1G    part  # ESP
‚îî‚îÄnvme0n1p2 999G  part  # LUKS + BTRFS
```


### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LUKS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

> [!NOTE]
> LUKS2 —Å Argon2id ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç. Intel i7 12th Gen –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç AES-NI –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.

```bash
# –°–æ–∑–¥–∞—ë–º –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª LUKS2
# - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: AES-256-XTS (–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ Intel AES-NI)
# - PBKDF: Argon2id (–∑–∞—â–∏—Ç–∞ –æ—Ç GPU bruteforce)
# - –ú–µ—Ç–∫–∞: cryptroot
cryptsetup luksFormat \
    --type luks2 \
    --cipher aes-xts-plain64 \
    --key-size 512 \
    --hash sha512 \
    --pbkdf argon2id \
    --label cryptroot \
    /dev/nvme0n1p2
```

> [!WARNING]
> –ù–∞ –≤–æ–ø—Ä–æ—Å `Are you sure?` –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ **YES** –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏!
> –ï—Å–ª–∏ –≤–≤–µ—Å—Ç–∏ `yes` —Å—Ç—Ä–æ—á–Ω—ã–º–∏ ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω–∞.

> [!CAUTION]
> **–ó–∞–ø–æ–º–Ω–∏ –ø–∞—Ä–æ–ª—å!** –û–Ω –Ω—É–∂–µ–Ω –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã.
> –ë–µ–∑ –Ω–µ–≥–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞!

```bash
# –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ä–∞–∑–¥–µ–ª (–∑–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å)
# –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—è–≤–∏—Ç—Å—è /dev/mapper/cryptroot
cryptsetup open /dev/nvme0n1p2 cryptroot

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
ls -la /dev/mapper/cryptroot
```


### 5. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# ESP —Ä–∞–∑–¥–µ–ª
mkfs.fat -F 32 -n BOOT /dev/nvme0n1p1

# BTRFS –Ω–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ
mkfs.btrfs -L nixos /dev/mapper/cryptroot
```

### 6. –°–æ–∑–¥–∞–Ω–∏–µ BTRFS subvolumes

```bash
# –ú–æ–Ω—Ç–∏—Ä—É–µ–º –∫–æ—Ä–µ–Ω—å BTRFS
mount /dev/mapper/cryptroot /mnt

# –°–æ–∑–¥–∞—ë–º subvolumes
btrfs subvolume create /mnt/@
btrfs subvolume create /mnt/@home
btrfs subvolume create /mnt/@nix
btrfs subvolume create /mnt/@persist
btrfs subvolume create /mnt/@log
btrfs subvolume create /mnt/@swap
btrfs subvolume create /mnt/@snapshots

# –†–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ–º
umount /mnt
```

### 7. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ subvolumes

```bash
# –û–ø—Ü–∏–∏ BTRFS –¥–ª—è NVMe SSD:
# - compress=zstd:1  ‚Äî –∫–æ–º–ø—Ä–µ—Å—Å–∏—è zstd (—É—Ä–æ–≤–µ–Ω—å 1, –±—ã—Å—Ç—Ä—ã–π)
# - noatime          ‚Äî –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä–µ–º—è –¥–æ—Å—Ç—É–ø–∞ (–±—ã—Å—Ç—Ä–µ–µ)
# - ssd              ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è SSD
# - discard=async    ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π TRIM
# - space_cache=v2   ‚Äî –∫—ç—à —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ v2
BTRFS_OPTS="compress=zstd:1,noatime,ssd,discard=async,space_cache=v2"


# –ö–æ—Ä–µ–Ω—å
mount -o subvol=@,$BTRFS_OPTS /dev/mapper/cryptroot /mnt

# –°–æ–∑–¥–∞—ë–º —Ç–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
mkdir -p /mnt/{boot,home,nix,persist,var/log,swap,.snapshots}

# –ú–æ–Ω—Ç–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ
mount -o subvol=@home,$BTRFS_OPTS /dev/mapper/cryptroot /mnt/home
mount -o subvol=@nix,$BTRFS_OPTS /dev/mapper/cryptroot /mnt/nix
mount -o subvol=@persist,$BTRFS_OPTS /dev/mapper/cryptroot /mnt/persist
mount -o subvol=@log,$BTRFS_OPTS /dev/mapper/cryptroot /mnt/var/log
mount -o subvol=@snapshots,$BTRFS_OPTS /dev/mapper/cryptroot /mnt/.snapshots

# Swap subvolume (–±–µ–∑ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏!)
mount -o subvol=@swap,noatime,ssd /dev/mapper/cryptroot /mnt/swap

# ESP
mount /dev/nvme0n1p1 /mnt/boot
```

### 8. –°–æ–∑–¥–∞–Ω–∏–µ Swapfile

```bash
# –û—Ç–∫–ª—é—á–∞–µ–º CoW –¥–ª—è swap
chattr +C /mnt/swap

# –°–æ–∑–¥–∞—ë–º swapfile 18GB
dd if=/dev/zero of=/mnt/swap/swapfile bs=1G count=18 status=progress
chmod 600 /mnt/swap/swapfile
mkswap /mnt/swap/swapfile
swapon /mnt/swap/swapfile
```

### 9. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
nixos-generate-config --root /mnt
```

> [!NOTE]
> –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç `/mnt/etc/nixos/hardware-configuration.nix` ‚Äî —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –¥–ª—è —Ç–≤–æ–µ–≥–æ –∂–µ–ª–µ–∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

---

### 10. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

> [!IMPORTANT]
> **nix-shell** ‚Äî —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏. Git –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ live USB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ—ç—Ç–æ–º—É –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –µ–≥–æ —á–µ—Ä–µ–∑ nix-shell.

**–®–∞–≥ 10.1: –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–∞–ø–∫—É (—Ç–∞–º —Ç–æ–ª—å–∫–æ hardware-configuration.nix)**
```bash
rm -rf /mnt/etc/nixos
```

**–®–∞–≥ 10.2: –ó–∞–ø—É—Å–∫–∞–µ–º nix-shell —Å git**
```bash
nix-shell -p git
```

> –ü–æ—Å–ª–µ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã —Ç—ã –ø–æ–ø–∞–¥—ë—à—å –≤–Ω—É—Ç—Ä—å nix-shell ‚Äî prompt –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ `[nix-shell:~]#`

**–®–∞–≥ 10.3: –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–≤—ã–ø–æ–ª–Ω—è–µ–º –í–ù–£–¢–†–ò nix-shell)**
```bash
git clone https://github.com/Sav231189/nixos.git /mnt/etc/nixos
```

**–®–∞–≥ 10.4: –í—ã—Ö–æ–¥–∏–º –∏–∑ nix-shell**
```bash
exit
```

> –ò–ª–∏ –Ω–∞–∂–º–∏ `Ctrl+D`

---

### 10.5. –ö–æ–ø–∏—Ä—É–µ–º hardware-configuration.nix

```bash
nixos-generate-config --root /mnt --show-hardware-config > /mnt/etc/nixos/hosts/matebook/hardware.nix
```

> [!TIP]
> **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å —Ñ–ª–µ—à–∫–∏** (–µ—Å–ª–∏ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞):
> ```bash
> cp -r /run/media/nixos/–§–õ–ï–®–ö–ê/nixos/* /mnt/etc/nixos/
> ```

---

### 11. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
nixos-install --flake /mnt/etc/nixos#matebook
```

### 12. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

```bash
# –ü–∞—Ä–æ–ª—å –¥–ª—è root
nixos-enter --root /mnt -c 'passwd'

# –ü–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
nixos-enter --root /mnt -c 'passwd aleksandr'

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
reboot
```

---

## üîê Impermanence ‚Äî –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è?

### –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**Impermanence** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∫–æ—Ä–Ω–µ–≤–æ–π —Ä–∞–∑–¥–µ–ª `/` **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ**. –°–∏—Å—Ç–µ–º–∞ –∫–∞–∫ –±—É–¥—Ç–æ "—Å–≤–µ–∂–µ—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è" –∫–∞–∂–¥—ã–π —Ä–∞–∑!

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

| –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|----------|
| üßπ **–ß–∏—Å—Ç–æ—Ç–∞** | –ù–∏–∫–∞–∫–æ–≥–æ "–º—É—Å–æ—Ä–∞" –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º |
| üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –í—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–µ –ü–û –Ω–µ –ø–µ—Ä–µ–∂–∏–≤—ë—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É |
| üìã **–ö–æ–Ω—Ç—Ä–æ–ª—å** | –¢—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—à—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –Ω—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–µ |
| üîÑ **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å** | –°–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ –≤ –∏–∑–≤–µ—Å—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ |
| üöÄ **–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** | –°–ª–æ–º–∞–ª–æ—Å—å? –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Å—å! |

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  /             ‚Üí –û–ß–ò–©–ê–ï–¢–°–Ø (–ø—É—Å—Ç–æ–π subvolume @)             ‚îÇ
‚îÇ  /nix          ‚Üí –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø (–≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥–∏)         ‚îÇ
‚îÇ  /persist      ‚Üí –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø (–≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)                ‚îÇ
‚îÇ  /home         ‚Üí –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø (—Ç–≤–æ–∏ —Ñ–∞–π–ª—ã)                   ‚îÇ
‚îÇ  /var/log      ‚Üí –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø (–ª–æ–≥–∏)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–í—Å—ë —á—Ç–æ –≤ `/persist` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "–ª–∏–Ω–∫—É–µ—Ç—Å—è" –æ–±—Ä–∞—Ç–Ω–æ –≤ –Ω—É–∂–Ω—ã–µ –º–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ symlinks.

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

```
/persist/
‚îú‚îÄ‚îÄ etc/
‚îÇ   ‚îú‚îÄ‚îÄ machine-id              # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –º–∞—à–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ ssh/                    # SSH host keys —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ NetworkManager/         # –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ WiFi —Å–µ—Ç–∏
‚îÇ       ‚îî‚îÄ‚îÄ system-connections/
‚îú‚îÄ‚îÄ var/lib/
‚îÇ   ‚îú‚îÄ‚îÄ bluetooth/              # –°–ø–∞—Ä–µ–Ω–Ω—ã–µ Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îî‚îÄ‚îÄ nixos/                  # –°–æ—Å—Ç–æ—è–Ω–∏–µ NixOS
‚îî‚îÄ‚îÄ home/aleksandr/
    ‚îú‚îÄ‚îÄ .ssh/                   # –¢–≤–æ–∏ SSH –∫–ª—é—á–∏
    ‚îú‚îÄ‚îÄ .gnupg/                 # GPG –∫–ª—é—á–∏
    ‚îú‚îÄ‚îÄ .config/Code/           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code
    ‚îú‚îÄ‚îÄ .mozilla/               # –ü—Ä–æ—Ñ–∏–ª—å Firefox
    ‚îú‚îÄ‚îÄ projects/               # –¢–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
    ‚îú‚îÄ‚îÄ Downloads/              # –ó–∞–≥—Ä—É–∑–∫–∏
    ‚îî‚îÄ‚îÄ Documents/              # –î–æ–∫—É–º–µ–Ω—Ç—ã
```

### –ß—Ç–æ-—Ç–æ –ø—Ä–æ–ø–∞–ª–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏?

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∫–∞—è-—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ "–∑–∞–±—ã–ª–∞" –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ù–∞–π–¥–∏, –≥–¥–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ** (–æ–±—ã—á–Ω–æ `~/.config/` –∏–ª–∏ `~/.local/share/`)
2. **–î–æ–±–∞–≤—å –ø—É—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** `modules/system/impermanence.nix`:

```nix
# –ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Telegram
users.aleksandr = {
  directories = [
    ".local/share/TelegramDesktop"  # ‚Üê –¥–æ–±–∞–≤—å —Å—é–¥–∞
  ];
};
```

3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ —Å–∏—Å—Ç–µ–º—É:**
```bash
sudo nixos-rebuild switch --flake /etc/nixos#matebook
```

> [!TIP]
> **–ü—Ä–∞–≤–∏–ª–æ**: –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ "–∑–∞–±—ã–≤–∞–µ—Ç" –ª–æ–≥–∏–Ω –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî –¥–æ–±–∞–≤—å –µ—ë –ø–∞–ø–∫—É –≤ impermanence!

---

## üé® Hyprland

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:

- **Hyprland** ‚Äî —Ç–∞–π–ª–æ–≤—ã–π Wayland compositor
- **Waybar** ‚Äî —Å—Ç–∞—Ç—É—Å –±–∞—Ä
- **Wofi** ‚Äî –ª–∞—É–Ω—á–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Dunst** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Hyprlock** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–∫—Ä–∞–Ω–∞
- **Grim + Slurp + Swappy** ‚Äî —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

### üéÆ –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–ª–∞–≤–∏—à–∏ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `Super + Return` | –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª (Kitty) |
| `Super + D` | –û—Ç–∫—Ä—ã—Ç—å launcher (Wofi) |
| `Super + B` | –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä (Firefox) |
| `Super + V` | –û—Ç–∫—Ä—ã—Ç—å VS Code |
| `Super + E` | –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä |
| `Super + Q` | –ó–∞–∫—Ä—ã—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ |
| `Super + F` | –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º |
| `Super + Space` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å floating —Ä–µ–∂–∏–º |
| `Super + P` | –ü—Å–µ–≤–¥–æ-—Ç–∞–π–ª–∏–Ω–≥ |
| `Super + J` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å split |

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

| –ö–ª–∞–≤–∏—à–∏ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `Super + ‚Üê/‚Üí/‚Üë/‚Üì` | –§–æ–∫—É—Å –Ω–∞ –æ–∫–Ω–æ |
| `Super + H/J/K/L` | –§–æ–∫—É—Å –Ω–∞ –æ–∫–Ω–æ (vim-style) |
| `Super + Shift + ‚Üê/‚Üí/‚Üë/‚Üì` | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–∫–Ω–æ |
| `Super + 1-9, 0` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å workspace |
| `Super + Shift + 1-9, 0` | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–∫–Ω–æ –Ω–∞ workspace |
| `Super + S` | –ü–æ–∫–∞–∑–∞—Ç—å scratchpad |
| `Super + –∫–æ–ª–µ—Å–æ –º—ã—à–∏` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å workspace |

### –ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞ –∏ —Å–∏—Å—Ç–µ–º–∞

| –ö–ª–∞–≤–∏—à–∏ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `Print` | –°–∫—Ä–∏–Ω—à–æ—Ç –æ–±–ª–∞—Å—Ç–∏ (–≤—ã–±–æ—Ä) |
| `Shift + Print` | –°–∫—Ä–∏–Ω—à–æ—Ç –≤—Å–µ–≥–æ —ç–∫—Ä–∞–Ω–∞ |
| `Super + L` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Ä–∞–Ω |
| `Alt + Shift` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–∞—Å–∫–ª–∞–¥–∫—É (us/ru) |
| `üîä Volume Up/Down` | –ì—Ä–æ–º–∫–æ—Å—Ç—å ¬±5% |
| `üîá Mute` | –í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ |
| `‚òÄÔ∏è Brightness Up/Down` | –Ø—Ä–∫–æ—Å—Ç—å ¬±5% |
| `‚èØÔ∏è Play/Pause` | –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ |

### –ú—ã—à—å

| –î–µ–π—Å—Ç–≤–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|
| `Super + Mouse Left` | –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –æ–∫–Ω–æ |
| `Super + Mouse Right` | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ |


---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
sudo nixos-rebuild switch --flake .#matebook

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ flake.lock
nix flake update

# –°–±–æ—Ä–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (—Ç–µ—Å—Ç)
nixos-rebuild build --flake .#matebook

# –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ
sudo nixos-rebuild switch --rollback

# –°–ø–∏—Å–æ–∫ –ø–æ–∫–æ–ª–µ–Ω–∏–π
nix-env --list-generations --profile /nix/var/nix/profiles/system

# –°–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞
sudo nix-collect-garbage -d
```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –ó–∞–≥—Ä—É–∑–∏—Å—å —Å USB
2. –û—Ç–∫—Ä–æ–π LUKS: `cryptsetup open /dev/nvme0n1p2 cryptroot`
3. –°–º–æ–Ω—Ç–∏—Ä—É–π —Ä–∞–∑–¥–µ–ª—ã (—Å–º. —à–∞–≥ 7)
4. `nixos-enter --root /mnt`
5. –ò—Å–ø—Ä–∞–≤—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ `nixos-rebuild boot --flake .#matebook`

### WiFi –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
systemctl status NetworkManager

# –õ–æ–≥–∏
journalctl -u NetworkManager -f
```

---

## üìñ –†–µ—Å—É—Ä—Å—ã

- [NixOS Manual](https://nixos.org/manual/nixos/stable/)
- [Nix Flakes](https://nixos.wiki/wiki/Flakes)
- [Home Manager](https://github.com/nix-community/home-manager)
- [Impermanence](https://github.com/nix-community/impermanence)
- [Hyprland Wiki](https://wiki.hyprland.org/)
